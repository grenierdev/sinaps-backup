{% extends "sinaps.admin/_frame.html" %}

{% import 'sinaps.admin/components/fields.html' as fields %}

{% set title = 'Sections' %}
{% set subtitle = '' %}
{% set breadcrumbs = [{
	href: '/admin/sections/',
	title: 'Sections'
},{
	href: '/admin/sections/' + section.schema.handle + '/',
	title: section.schema.label
}] %}

{% block content %}

	<div class="portlet light">
		<div class="portlet-title">
			<div class="caption">
				{{ section.schema.label }}
			</div>
			<div class="actions">
				{% if trashCount > 0 %}
					<a href="/admin/sections/{{ section.schema.handle }}/trash" class="btn">
						{{ "%s in trash"|format(trashCount) }}
					</a>
				{% endif %}
				<a href="/admin/sections/{{ section.schema.handle }}/create" class="btn default btn-sm blue">
					<i class="fa fa-plus"></i>
					{{ "Create" }}
				</a>
			</div>
		</div>
		<div class="portlet-body">

			<table class="table table-hover">
				<thead>
					<tr>
						<th width="1"></th>
						<th width="1"></th>
						{% for path, column in columns %}
							<th>{{ column.label }}</th>
						{% endfor %}
						<th width="1" class="text-no-wrap">{{ "Post date" }}</th>
						<th width="1" class="text-no-wrap">{{ "Expire date" }}</th>
					</tr>
				</thead>
				<tbody>
					{% for entry in entries %}
						<tr>
							<td><input type="checkbox" name="id[]" value="{{ entry.id }}" /></td>
							<td>
								{% if entry.get('state') == 'published' %}
									<i class="fa fa-circle"></i>
								{% else %}
									<i class="fa fa-adjust"></i>
								{% endif %}
							</td>
							{% for path, column in columns %}
								<td>
									{% if loop.first %}
										<a href="/admin/sections/{{ section.schema.handle }}/edit/{{ entry.id }}">
									{% endif %}
									{% if column.lang %}
										{% set value = l10n(entry.get(path))|default('...') %}
									{% else %}
										{% set value = entry.get(path)|default('...') %}
									{% endif %}
									{{ fields.value({
										type: column.input,
										value: value
									}) }}
									{% if loop.first %}
										</a>
									{% endif %}
								</td>
							{% endfor %}
							<td class="text-no-wrap">
								{{ fields.value({
									type: 'date',
									value: entry.postDate
								}) }}
							</td>
							<td class="text-no-wrap">
								{{ fields.value({
									type: 'date',
									value: entry.expireDate
								}) }}
							</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</div>


{% endblock %}

{% block footJS %}
	<script src="/admin/resources/plugins/jquery-treetable/jquery.treetable.js" type="text/javascript"></script>
	<link href="/admin/resources/plugins/jquery-treetable/jquery.treetable.css" rel="stylesheet" type="text/css"/>
	<script>
		$(function () {

		});
	</script>
{% endblock %}
